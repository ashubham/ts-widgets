{"version":3,"file":"search-bar.js","sources":["../../../app/.tmp/ts-out/src/embed/components/dropdown/dropdown-css.js","../../../app/.tmp/ts-out/src/embed/components/dropdown/dropdown.js","../../../app/.tmp/ts-out/src/embed/components/search-bar/search-bar-css.js","../../../node_modules/textarea-caret/index.js","../../../app/.tmp/ts-out/src/embed/components/search-bar/search-bar.js"],"sourcesContent":["import { css } from 'lit-element';\nimport { getCSSValue } from '../util';\n// language=CSS\nexport const getStyles = () => css `\n:host {\n    display: flex;\n    align-items: stretch;\n    background: #fff;\n}\n\n.dropdown-item {\n    padding: 5px 40px 5px 10px;\n    font-family: Arial;\n    font-size: 16px;\n    cursor: pointer;\n    color: ${getCSSValue('completionFontColor', '#333')};\n}\n\n.dropdown-item:hover {\n    background-color: #d8d8d8;\n}\n`;\n//# sourceMappingURL=dropdown-css.js.map","import * as tslib_1 from \"tslib\";\n/**\n * Import LitElement base class, html helper function,\n * and TypeScript decorators\n **/\nimport { LitElement, html, customElement, property } from 'lit-element';\nimport { getStyles } from './dropdown-css';\n/**\n * Use the customElement decorator to define your class as\n * a custom element. Registers <my-element> as an HTML tag.\n */\nlet TSDropdown = class TSDropdown extends LitElement {\n    /**\n     * Use the customElement decorator to define your class as\n     * a custom element. Registers <my-element> as an HTML tag.\n     */\n    constructor() {\n        super(...arguments);\n        /**\n         * Create an observed property. Triggers update on change.\n         */\n        this.list = [];\n    }\n    static get styles() {\n        return getStyles();\n    }\n    firstUpdated(props) {\n        this.shadowRoot.getElementById('container')\n            .addEventListener('mousedown', (e) => {\n            let idx = (e.target).id;\n            this.selectItem(this.list[Number(idx)]);\n        });\n    }\n    selectItem(item) {\n        let evt = new CustomEvent('select-item', {\n            detail: {\n                item\n            }\n        });\n        this.dispatchEvent(evt);\n    }\n    /**\n     * Implement `render` to define a template for your element.\n     */\n    render() {\n        /**\n         * Use JavaScript expressions to include property values in\n         * the element template.\n         */\n        // language=HTML\n        return html `<div class=\"dropdown\" id=\"container\">\n            ${this.list.map((item, idx) => html `\n                <div class=\"dropdown-item\" id=\"${idx}\" @click=\"${() => this.selectItem(item)}\">\n                    ${item.getCompletionTokensQueryString()}\n                </div>\n            `)}\n        </div>`;\n    }\n};\ntslib_1.__decorate([\n    property({ type: Array })\n], TSDropdown.prototype, \"list\", void 0);\nTSDropdown = tslib_1.__decorate([\n    customElement('ts-dropdown')\n], TSDropdown);\nexport { TSDropdown };\n// Temp utils to be moved to SDK\nfunction getCompletions(text, caretPostion) {\n    return Promise.resolve([\n        'this is the first completion',\n        'this is the second completion'\n    ]);\n}\n//# sourceMappingURL=dropdown.js.map","import { css } from 'lit-element';\nimport { getCSSValue } from '../util';\n// language=CSS\nexport const getStyles = () => css `\n:host {\n    display: flex;\n    align-items: stretch;\n    position: relative;\n}\n\n.ts-search-bar {\n    display: flex;\n    flex: 1 1 0;\n    align-items: center;\n}\n\n.search-input {\n    flex: 1 1 0;\n    height: 32px;\n    font-size: 16px;\n    padding-left: 10px;\n    background-color: #fff;\n    border: 1px solid #bbc0c4;\n    border-radius: 3px;\n    font-family: Arial;\n    outline: none;\n    color: ${getCSSValue('searchFontColor', '#333')};\n}\n\n.speech-icon {\n    height: 20px;\n    flex: 0 0 14px;\n    margin-left: -24px;\n    filter: opacity(50%);\n    cursor: pointer;\n}\n\n.search-input:focus {\n    background-color: #fff;\n}\n\n.completions {\n    position: absolute;\n    display: none;\n    top: 32px;\n    padding: 10px 0;\n    border-radius: 3px;\n    box-shadow: 0 0 0 1px rgba(0, 0, 0, .15), 0 2px 3px rgba(0, 0, 0, .2);\n    background-color: ${getCSSValue('completionBackgroundColor', '#fff')};\n    margin-top: 2px;\n}\n`;\n//# sourceMappingURL=search-bar-css.js.map","/* jshint browser: true */\n\n(function () {\n\n// We'll copy the properties below into the mirror div.\n// Note that some browsers, such as Firefox, do not concatenate properties\n// into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),\n// so we have to list every single property explicitly.\nvar properties = [\n  'direction',  // RTL support\n  'boxSizing',\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY',  // copy the scrollbar for IE\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',  // might not make a difference, but better be safe\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize'\n\n];\n\nvar isBrowser = (typeof window !== 'undefined');\nvar isFirefox = (isBrowser && window.mozInnerScreenX != null);\n\nfunction getCaretCoordinates(element, position, options) {\n  if (!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  var debug = options && options.debug || false;\n  if (debug) {\n    var el = document.querySelector('#input-textarea-caret-position-mirror-div');\n    if (el) el.parentNode.removeChild(el);\n  }\n\n  // The mirror div will replicate the textarea's style\n  var div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n\n  var style = div.style;\n  var computed = window.getComputedStyle ? window.getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n  var isInput = element.nodeName === 'INPUT';\n\n  // Default textarea styles\n  style.whiteSpace = 'pre-wrap';\n  if (!isInput)\n    style.wordWrap = 'break-word';  // only for textarea-s\n\n  // Position off-screen\n  style.position = 'absolute';  // required to return coordinates properly\n  if (!debug)\n    style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n  // Transfer the element's properties to the div\n  properties.forEach(function (prop) {\n    if (isInput && prop === 'lineHeight') {\n      // Special case for <input>s because text is rendered centered and line height may be != height\n      style.lineHeight = computed.height;\n    } else {\n      style[prop] = computed[prop];\n    }\n  });\n\n  if (isFirefox) {\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n    if (element.scrollHeight > parseInt(computed.height))\n      style.overflowY = 'scroll';\n  } else {\n    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n  }\n\n  div.textContent = element.value.substring(0, position);\n  // The second special handling for input type=\"text\" vs textarea:\n  // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n  if (isInput)\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n\n  var span = document.createElement('span');\n  // Wrapping must be replicated *exactly*, including when a long word gets\n  // onto the next line, with whitespace at the end of the line before (#7).\n  // The  *only* reliable way to do that is to copy the *entire* rest of the\n  // textarea's content into the <span> created at the caret position.\n  // For inputs, just '.' would be enough, but no need to bother.\n  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n  div.appendChild(span);\n\n  var coordinates = {\n    top: span.offsetTop + parseInt(computed['borderTopWidth']),\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth']),\n    height: parseInt(computed['lineHeight'])\n  };\n\n  if (debug) {\n    span.style.backgroundColor = '#aaa';\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nif (typeof module != 'undefined' && typeof module.exports != 'undefined') {\n  module.exports = getCaretCoordinates;\n} else if(isBrowser) {\n  window.getCaretCoordinates = getCaretCoordinates;\n}\n\n}());\n","import * as tslib_1 from \"tslib\";\n/**\n * Import LitElement base class, html helper function,\n * and TypeScript decorators\n **/\nimport { LitElement, html, customElement, property } from 'lit-element';\nimport '../dropdown/dropdown';\nimport _ from 'lodash';\nimport { getStyles } from './search-bar-css';\nimport getCaretCoordinates from 'textarea-caret';\n/**\n * Use the customElement decorator to define your class as\n * a custom element. Registers <my-element> as an HTML tag.\n */\nlet TSSearchBar = class TSSearchBar extends LitElement {\n    /**\n     * Use the customElement decorator to define your class as\n     * a custom element. Registers <my-element> as an HTML tag.\n     */\n    constructor() {\n        super(...arguments);\n        this.suggestionsList = [];\n        /**\n         * Create an observed property. Triggers update on change.\n         */\n        this.foo = 'foo';\n    }\n    static get styles() {\n        return getStyles();\n    }\n    firstUpdated(props) {\n        this.$completions = this.shadowRoot.getElementById('completions');\n        this.$input = this.shadowRoot.getElementById('input');\n        this.$input.addEventListener('blur', (e) => {\n            this.$completions.style.display = 'none';\n        });\n    }\n    async updateCompletions(searchText = this.$input.value, caretPosition = this.$input.selectionStart) {\n        this.suggestionsList = await getCompletions(searchText, caretPosition);\n        if (!this.suggestionsList.length) {\n            this.$completions.style.display = 'none';\n        }\n        console.log(searchText, caretPosition);\n        this.requestUpdate();\n    }\n    onKeyDown(e) {\n        let input = e.target;\n        if (e.key === 'Enter') {\n            console.log('Query Entered', input.value);\n            input.blur();\n            this.updateResult(input.value);\n            return;\n        }\n        let caretPosition = input.selectionStart;\n        this.$completions.style.display = 'block';\n        this.updateCompletions(input.value, caretPosition);\n        this.positionDropdown(caretPosition);\n    }\n    onFocus(e) {\n        requestAnimationFrame(() => {\n            this.$completions.style.display = 'block';\n            this.updateCompletions();\n            this.positionDropdown();\n        });\n    }\n    async updateResult(query) {\n        console.log('Run the query', query);\n        window.thoughtspotSDK.showLoading && window.thoughtspotSDK.showLoading();\n        let answerJson = await window.thoughtspotSDK.getAnswerModel(query);\n        console.log(answerJson);\n    }\n    selectCompletion(e) {\n        console.log(e.detail.item);\n        let completion = e.detail.item;\n        //let sageModel = window.thoughtspotSDK.answerSageClient.getSageModel();\n        let nlQueryTokens = this.$input.value.split(' ');\n        let prefixTokens = _.take(nlQueryTokens, completion.numPrefixTokens || 0);\n        let suffixTokens = _.takeRight(nlQueryTokens, completion.numSuffixTokens || 0);\n        let head = [\n            ...prefixTokens,\n            completion.getCompletionTokensQueryString()\n        ].join(' ');\n        let caretPosition = head.length;\n        this.$input.value = [\n            head,\n            ...suffixTokens\n        ].join(' ');\n        setTimeout(() => {\n            this.$input.focus();\n            setTimeout(() => {\n                this.$input.setSelectionRange(caretPosition, caretPosition);\n            });\n        });\n    }\n    positionDropdown(caretPosition) {\n        caretPosition = caretPosition || this.$input.selectionStart;\n        let caretInfo = getTokenPositionFromIndex(this.$input.value, caretPosition, ' ');\n        let caretCoords = getCaretCoordinates(this.$input, caretInfo.completionPosition);\n        move(this.$completions, caretCoords.left - 10, 0, 300);\n    }\n    startDictation() {\n        let recognition = new webkitSpeechRecognition();\n        recognition.continuous = false;\n        recognition.interimResults = false;\n        recognition.lang = 'en-US';\n        recognition.start();\n        this.$input.value = 'listening....';\n        recognition.onresult = (e) => {\n            try {\n                this.$input.value = e.results[0][0].transcript;\n                this.updateResult(this.$input.value);\n            }\n            catch (err) {\n                console.error(err);\n            }\n            finally {\n                recognition.stop();\n            }\n        };\n        recognition.onerror = function (e) {\n            recognition.stop();\n            this.$input.value = '';\n        };\n    }\n    /**\n     * Implement `render` to define a template for your element.\n     */\n    render() {\n        /**\n         * Use JavaScript expressions to include property values in\n         * the element template.\n         */\n        // language=HTML\n        return html `<div class=\"ts-search-bar\">\n            <input class=\"search-input\" id=\"input\"\n                placeholder=\"Ask me anything!\"\n                autocomplete=\"off\"\n                @keyup=\"${this.onKeyDown}\" @focus=\"${this.onFocus}\">\n            <img class=\"speech-icon\"\n              @click=\"${this.startDictation}\"\n              src=\"http://cdn.onlinewebfonts.com/svg/img_497369.png\"/>\n            <ts-dropdown class=\"completions\" id=\"completions\"\n                .list=${this.suggestionsList} @select-item=\"${this.selectCompletion}\">\n            </ts-dropdown>\n        </div>`;\n    }\n};\ntslib_1.__decorate([\n    property()\n], TSSearchBar.prototype, \"foo\", void 0);\nTSSearchBar = tslib_1.__decorate([\n    customElement('ts-search-bar')\n], TSSearchBar);\nexport { TSSearchBar };\nlet lastX, lastY;\nfunction move($el, x, y, delay) {\n    if (x === lastX && y === lastY)\n        return;\n    lastX = lastX || 0;\n    lastY = lastY || 0;\n    $el.animate([{\n            transform: `translate3d(${lastX}px, ${lastY}px, 0)`\n        }, {\n            transform: `translate3d(${x}px, ${y}px, 0)`\n        }], {\n        duration: delay,\n        easing: 'ease',\n        fill: 'forwards'\n    });\n    lastX = x;\n    lastY = y;\n}\nfunction getTokenPositionFromIndex(text, position, separator = ' ') {\n    let currentPos = text.indexOf(separator);\n    let currentLength = 0;\n    let tokenIdx = 0;\n    while (currentPos < position && currentPos >= 0) {\n        currentLength = currentPos;\n        tokenIdx++;\n        currentPos = text.indexOf(separator, currentPos + 1);\n    }\n    return {\n        tokenIdx: tokenIdx,\n        tokenOffset: position - currentLength,\n        completionPosition: text.split(separator).slice(0, tokenIdx).join(' ').length + 1\n    };\n}\n// Temp utils to be moved to SDK\nasync function getCompletions(text, caretPostion) {\n    return window.thoughtspotSDK.getCompletions(text, caretPostion);\n}\nlet loadingCbs = [];\nwindow.thoughtspotSDK.onLoading = (cb) => {\n    loadingCbs.push(cb);\n};\nwindow.thoughtspotSDK.showLoading = () => {\n    loadingCbs.forEach(cb => cb());\n};\n//# sourceMappingURL=search-bar.js.map"],"names":["tslib_1.__decorate","getStyles","getCaretCoordinates"],"mappings":"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"}